{{ define "main" }}
<h1>{{ .Title }}</h1>

{{ if .Content }}
<div class="content">
    {{ .Content }}
</div>
{{ end }}

{{ if eq .Section "projects" }}
<!-- Projects Grid Layout -->
<div class="project-grid">
    {{ range .Pages.ByDate.Reverse }}
    <div class="project-card">

        {{ if .Params.hasDetails }}
        <h3><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        {{ else}}
        <h3>
            {{ if .Params.demo }}
            <a href="{{ .Params.demo }}" target="_blank">{{ .Title }}</a>
            {{ else if .Params.github }}
            <a href="{{ .Params.github }}" target="_blank">{{ .Title }}</a>
            {{ else }}
            {{ .Title }}
            {{ end }}
        </h3>
        {{ end }}

        <div class="post-meta">{{ .Params.tech | default "Various Technologies" }} â€¢ {{ .Date.Format "January 2006" }}
        </div>
        {{ with .Params.description }}
        <p>{{ . }}</p>
        {{ else }}
        {{ $content := .Content | plainify }}
        {{ $firstParagraph := index (split $content "\n\n") 0 }}
        <p>{{ $firstParagraph | truncate 200 }}</p>
        {{ end }}
        <div class="project-links">
            {{ if .Params.github }}
            <a href="{{ .Params.github }}" target="_blank">[ github ]</a>
            {{ end }}
            {{ if .Params.demo }}
            <a href="{{ .Params.demo }}" target="_blank">[ demo ]</a>
            {{ end }}

            {{ if .Params.hasDetails }}
            <a href="{{ .Permalink }}">[ details ]</a>
            {{ end }}
        </div>
    </div>
    {{ end }}
</div>
{{ else }}
<!-- Posts List Layout -->
<div class="post-list">
    {{ range .Pages.ByDate.Reverse }}
    <div class="post-item">
        <h3 class="post-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        <div class="post-meta">{{ .Date.Format "January 2, 2006" }}</div>
        {{ with .Params.description }}
        <p>{{ . }}</p>
        {{ else }}
        {{ $content := .Content | plainify }}
        {{ $firstParagraph := index (split $content "\n\n") 0 }}
        <p>{{ $firstParagraph | truncate 200 }}</p>
        {{ end }}
        <div class="project-links">
            <a href="{{ .Permalink }}">[ read more ]</a>
        </div>
    </div>
    {{ end }}
</div>
{{ end }}
{{ end }}